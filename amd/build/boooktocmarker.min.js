define("block_revisionmanager/boooktocmarker",["jquery","core/ajax"],(function($,Ajax){return{init:function(params){Ajax.call([{methodname:"block_revisionmanager_get_read_urls",args:{courseid:params.courseid},done:function(result){const urlRatingsMap={};result.entries.forEach((entry=>{const cleanUrl=entry.pageurl.replace(/^\/+/,"");urlRatingsMap[cleanUrl]=entry.ratingvalues})),console.log("URL to ratings map:",urlRatingsMap),$("div.book_toc a").each((function(){const fullpath="mod/book/"+$(this).attr("href");if(urlRatingsMap[fullpath]){const ratings=urlRatingsMap[fullpath].join("");console.log("Matched ".concat(fullpath," â†’ ").concat(ratings)),$(this).prepend("".concat(ratings," "))}}))},fail:function(err){console.error("Could not fetch read URLs",err)}}])}}}));

//# sourceMappingURL=boooktocmarker.min.js.map