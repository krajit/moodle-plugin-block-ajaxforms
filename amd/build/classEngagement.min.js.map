{"version":3,"file":"classEngagement.min.js","sources":["../src/classEngagement.js"],"sourcesContent":["define(['core/modal_factory'], function(ModalFactory) {\n    return {\n        init: function () {\n            document.querySelectorAll('.segment').forEach(segment => {\n                segment.addEventListener('click', async function () {\n                    const json = this.getAttribute('data-students');\n                    const title = this.getAttribute('data-title') || 'Students';\n                    let students;\n\n                    try {\n                        students = JSON.parse(json);\n                    } catch (e) {\n                        students = [];\n                    }\n\n                    const modalRoot = document.getElementById('studentModal');\n                    const tbody = document.getElementById('studentModalTableBody');\n                    const titleEl = document.getElementById('studentModalLabel');\n\n                    titleEl.textContent = title;\n                    tbody.innerHTML = '';\n\n                    students.forEach(student => {\n                        const tr = document.createElement('tr');\n                        tr.innerHTML = `<td>${student.fullname}</td><td>${student.email}</td>`;\n                        tbody.appendChild(tr);\n                    });\n\n                    // Use Moodle's modal_factory to handle modal logic cleanly\n                    const modalInstance = await ModalFactory.create({\n                        title: title,\n                        body: modalRoot.querySelector('.modal-body'),\n                        type: ModalFactory.types.DEFAULT\n                    });\n\n                    modalInstance.show();\n\n                    // Optional: remove the default one if needed\n                    modalRoot.classList.remove('show');\n                });\n            });\n        }\n    };\n});\n"],"names":["define","ModalFactory","init","document","querySelectorAll","forEach","segment","addEventListener","async","json","this","getAttribute","title","students","JSON","parse","e","modalRoot","getElementById","tbody","textContent","innerHTML","student","tr","createElement","fullname","email","appendChild","create","body","querySelector","type","types","DEFAULT","show","classList","remove"],"mappings":"AAAAA,+CAAO,CAAC,uBAAuB,SAASC,oBAC7B,CACHC,KAAM,WACFC,SAASC,iBAAiB,YAAYC,SAAQC,UAC1CA,QAAQC,iBAAiB,SAASC,uBACxBC,KAAOC,KAAKC,aAAa,iBACzBC,MAAQF,KAAKC,aAAa,eAAiB,eAC7CE,aAGAA,SAAWC,KAAKC,MAAMN,MACxB,MAAOO,GACLH,SAAW,SAGTI,UAAYd,SAASe,eAAe,gBACpCC,MAAQhB,SAASe,eAAe,yBACtBf,SAASe,eAAe,qBAEhCE,YAAcR,MACtBO,MAAME,UAAY,GAElBR,SAASR,SAAQiB,gBACPC,GAAKpB,SAASqB,cAAc,MAClCD,GAAGF,wBAAmBC,QAAQG,6BAAoBH,QAAQI,eAC1DP,MAAMQ,YAAYJ,cAIMtB,aAAa2B,OAAO,CAC5ChB,MAAOA,MACPiB,KAAMZ,UAAUa,cAAc,eAC9BC,KAAM9B,aAAa+B,MAAMC,WAGfC,OAGdjB,UAAUkB,UAAUC,OAAO"}