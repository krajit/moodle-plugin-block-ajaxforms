{"version":3,"file":"boooktocmarker.min.js","sources":["../src/boooktocmarker.js"],"sourcesContent":["define(['jquery', 'core/ajax'], function($, Ajax) {\n    return {\n        init: function(params) {\n            Ajax.call([{\n                methodname: 'block_revisionmanager_get_read_urls',\n                args: { courseid: params.courseid },\n                done: function(result) {\n                    // Normalize DB entries\n                    const visited = result.urls.map(url => url.replace(/^\\/+/, '')); // remove leading slash\n\n                    console.log('Visited URLs from DB:', visited);\n\n                    $('div.book_toc a').each(function() {\n                        const href = $(this).attr('href'); // e.g., \"view.php?id=28&chapterid=130\"\n                        const fullpath = 'mod/book/' + href;\n\n                        console.log('Checking:', fullpath);\n                        if (visited.includes(fullpath)) {\n                            console.log('Matched:', fullpath);\n//                            $(this).addClass('read-chapter');\n                            $(this).prepend('âœ… ');\n                        }\n                    });\n                },\n                fail: function(err) {\n                    console.error(\"Could not fetch read URLs\", err);\n                }\n            }]);\n        }\n    };\n});\n"],"names":["define","$","Ajax","init","params","call","methodname","args","courseid","done","result","visited","urls","map","url","replace","console","log","each","fullpath","this","attr","includes","prepend","fail","err","error"],"mappings":"AAAAA,8CAAO,CAAC,SAAU,cAAc,SAASC,EAAGC,YACjC,CACHC,KAAM,SAASC,QACXF,KAAKG,KAAK,CAAC,CACPC,WAAY,sCACZC,KAAM,CAAEC,SAAUJ,OAAOI,UACzBC,KAAM,SAASC,cAELC,QAAUD,OAAOE,KAAKC,KAAIC,KAAOA,IAAIC,QAAQ,OAAQ,MAE3DC,QAAQC,IAAI,wBAAyBN,SAErCV,EAAE,kBAAkBiB,MAAK,iBAEfC,SAAW,YADJlB,EAAEmB,MAAMC,KAAK,QAG1BL,QAAQC,IAAI,YAAaE,UACrBR,QAAQW,SAASH,YACjBH,QAAQC,IAAI,WAAYE,UAExBlB,EAAEmB,MAAMG,QAAQ,WAI5BC,KAAM,SAASC,KACXT,QAAQU,MAAM,4BAA6BD"}